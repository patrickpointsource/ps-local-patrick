{
	"type":"object",
	"$schema": "http://json-schema.org/draft-04/schema",
	"id": "Projects",
	"properties":{
		"_id": {"type": "string"},
		"_rev": {"type": "string"},
		"_deleted": {"type":"boolean"},
		"etag": {"type": ["string", "number"]},
		"form": {"enum": ["Projects"]},
		"about": {"type":"string"},
		"committed": {"type":"boolean"},
		"created": {
			"type":"object",
			"properties":{
				"date": {"type":"string", "format": "date-time"},
				"resource": {"type":"string"},
				"name": {"type":"string"}
			}
		},
		"customerName": {"type":"string", "prohibited_values": [""]},
		"description": {"type":"string"},
		"primaryContact": {"type":"string"},
		"executiveSponsor": {"$ref" : "#/definitions/resource"},
		"initStartDate": {"type":"string", "format": "date-time"},
		"initEndDate": {"type":"string", "format": "date-time"},
		"modified": {
			"type":"object",
			"properties":{
				"date": {"type":"string", "format": "date-time"},
				"resource": {"type":"string"},				
				"name": {"type":"string"}
			}
		},
		"name": {"type":"string", "prohibited_values": [""]},
		"resource": {"type":"string"},
		"salesSponsor": {"$ref" : "#/definitions/resource"},
		"startDate": {"type":"string", "format": "date-time"},
		"endDate": {"type":"string", "format": "date-time"},
		"state": {"default": "planning", "enum": ["planning", "active", "done", "poc", "preSales", "supportActive", "clientActive"]},
		"type": {"enum": [ "invest", "poc", "paid" ]},		
		"terms": {
			"type":"object",
			"properties":{
				"fixedBidServicesRevenue": {"type":"number"},
				"includesProjectManagementOverhead": {"type":"boolean"},
				"billingFrequency": {"type": "string"},
				"billingDate": {"type": "string"},
				"type": {"type":"string"},
				"softwareEstimate": {"type": "number"}
			}
		},		
		"roles": {
			"type":"array",
			"minItems": 1,
			"items":
				{
					"type":"object",
					"properties":{
						"_id": {"type":"string"},
						"coveredKMin": {"type":"number"},
						"daysGap": {"type":"number"},
						"hoursExtraCovered": {"type":["null", "number"]},
						"hoursNeededToCover": {	"type":"number"},
						"isCurrentRole": {"type":"boolean"},
						"isFutureRole": {"type":"boolean"},
						"isPastRole": {"type":"boolean"},
						"percentageCovered": {"type":["null", "number"]},
						"rate": {
							"type":"object",
							"properties":{
								"estimatedTotal": {"type":["null", "number"]},
								"advAmount": {"type":"number"},
								"amount": {	"type":"number"},
								"fullyUtilized": {"type":"boolean"},
								"hoursPerMth": {"type": ["null", "number"], "maximum": 180},
								"hoursPerWeek": {"type": ["null", "number"], "maximum": 50},
								"loadedAmount": {"type":"number"},
								"rateUnits": {"enum": ["$/hr", "$/month"]},
								"type": {"enum": ["monthly", "weekly", "hourly"]}
							},
							"required": ["type"]
						},
						"shore": {"type":"string"},
						"startDate": {"type":"string", "format": "date-time"},
						"endDate": {"type":"string", "format": "date-time"},
						"type": {
							"type":"object",
							"properties":{
								"resource": {"type":"string"},
								"id": {"type":"string"}
								},
							"required": ["resource"]
						}
					},
					"required": ["type", "rate"]
				}
			}
	},
	"required": ["form", "customerName", "name", "type", "startDate", "state",
		"executiveSponsor", "roles"],
	"definitions": {
		"resource": {
			"type":"object",
			"properties":{
				"resource": {"type":"string"},
				"name": {"type":"string"}
			},
			"required": ["resource"]
		}
	}
}
