{
	"type":"object",
	"$schema": "http://json-schema.org/draft-04/schema",
	"id": "Projects",
	"properties":{
		"_id": {"type": "string"},
		"_rev": {"type": "string"},
		"etag": {"type": ["string", "number"]},
		"form": {"type": "string"},
		"about": {"type":"string"},
		"committed": {"type":"boolean"},
		"created": {
			"type":"object",
			"properties":{
				"date": {"type":"string"},
				"resource": {"type":"string"},
				"name": {"type":"string"}
			}
		},
		"customerName": {"type":"string"},
		"description": {"type":"string"},
		"primaryContact": {"type":"string"},
		"executiveSponsor": {"$ref" : "#/definitions/resource"},
		"initStartDate": {"type":"string"},
		"initEndDate": {"type":"string"},
		"modified": {
			"type":"object",
			"properties":{
				"date": {"type":"string"},
				"resource": {"type":"string"},				
				"name": {"type":"string"}
			}
		},
		"name": {"type":"string"},
		"resource": {"type":"string"},
		"roles": {
			"type":"array",
			"minItems": 1,
			"items":
				{
					"type":"object",
					"properties":{
						"_id": {"type":"string"},
						"coveredKMin": {"type":"number"},
						"daysGap": {"type":"number"},
						"hoursExtraCovered": {"type":["null", "number"]},
						"hoursNeededToCover": {	"type":"number"},
						"isCurrentRole": {"type":"boolean"},
						"isFutureRole": {"type":"boolean"},
						"isPastRole": {"type":"boolean"},
						"percentageCovered": {"type":["null", "number"]},
						"originalAssignees": {
							"type":"array",
							"items": { "$ref" : "#/definitions/assignees"}
						},
						"rate": {
							"type":"object",
							"properties":{
								"estimatedTotal": {"type":["null", "number"]},
								"advAmount": {"type":"number"},
								"amount": {	"type":"number"},
								"fullyUtilized": {"type":"boolean"},
								"hoursPerMth": {"type": ["null", "number"], "maximum": 180},
								"hoursPerWeek": {"type": ["null", "number"], "maximum": 50},
								"loadedAmount": {"type":"number"},
								"rateUnits": {"enum": ["$/hr", "$/month"]},
								"type": {"enum": ["monthly", "weekly", "hourly"]}
							},
							"required": ["type"]
						},
						"shore": {"type":"string"},
						"startDate": {"type":"string"},
						"endDate": {"type":"string"},
						"type": {
							"type":"object",
							"properties":{
								"id": {"type":"string"},
								"resource": {"type":"string"}
							},
							"required": ["resource"]
						}
					},
					"required": ["type", "rate"]
				}
		},
		"salesSponsor": {"$ref" : "#/definitions/resource"},
		"startDate": {"type":"string"},
		"endDate": {"type":"string"},
		"state": {"default": "planning", "enum": ["planning", "active", "done", "poc", "preSales", "supportActive", "clientActive"]},
		"terms": {
			"type":"object",
			"properties":{
				"fixedBidServicesRevenue": {"type":"number"},
				"includesProjectManagementOverhead": {"type":"boolean"},
				"billingFrequency": {"type": "string"},
				"billingDate": {"type": "string"},
				"type": {"type":"string"},
				"softwareEstimate": {"type": "number"}
			}
		},
		"type": {"enum": [ "invest", "poc", "paid" ]}
	},
	"required": ["form", "customerName", "name", "type", "startDate", "state",
		"executiveSponsor", "roles"],
	"definitions": {
		"assignees": {
			"type": "object",
			"properties": {
				"hoursPerWeek": {"type": "number"},
				"startDate": {"type": "string"},
				"endDate": {"type": "string"},
				"person": {
					"type": "object",
					"properties": {
						"resource": {"type": "string"},
						"thumbnail": {"type": "string"},
						"name": {"type": "string"}											
					}
				}			
			}
		},
		"resource": {
			"type":"object",
			"properties":{
				"resource": {"type":"string"},
				"name": {"type":"string"}
			},
			"required": ["resource"]
		}

	}
}
