<div class="row">
	<div class="col-xs-8 col-sm-4"><h3>Hours</h3></div>
	<div class="actions col-xs-4 col-sm-8 pageActions">
		<a class="btn btn-default" ng-mousedown="hoursToCSV.generate()" ng-href="{{hoursToCSV.link()}}" download="{{project.name}}-hours.csv">
			<div class="hidden-xs"><i class="fa fa-table"></i><span> Export to CSV</span></div>
			<div class="visible-xs"><i class="fa fa-table"></i></div>
		</a>
		<button type="button"
			class="btn btn-default" data-toggle="collapse" data-target="#newHoursDialog">
	  		<div class="hidden-xs"><i class="fa fa-plus-square"></i> <span > Add Hours</span></div>
	  		<div class="visible-xs"><i class="fa fa-plus-square"></i></div>
		</button>
	</div>
</div>

<!-- {{project}}<br/><br/>-->
<!-- {{hoursToCSV.rawJSON()}}<br/><br/>-->
<!-- {{hoursToCSV.rawCSV()}} -->

<div ng-form="newHoursForm" id="newHoursDialog" class="well collapse out">
    <div class="row">
    	<div class="col-xs-12 col-sm-6 row">
	    	<div class="col-xs-6">
	            <label class="control-label" for="role">Project: </label>
	            <span>{{project.name}}</span>
	        </div>
	        <div class="col-xs-6">
	            <label class="control-label" for="role">Person: </label>
	            <span>{{me.name}}</span>
	        </div>
			<div class="col-xs-6">
		         <label class="control-label" for="hours">* Hours:</label>
		         <input id="hours" name="hours" class="form-control" type="number" ng-model="newHoursRecord.hours" ng-required="true"/>
	        </div>
   			<div class="col-xs-6">
	            <label class="control-label" for="date">* Date:</label>
	            <input id="date" name="date" class="form-control datepicker" type="text"
                    ng-model="newHoursRecord.date"
                		todayBtn="true" data-provide="datepicker" data-date-format="yyyy-mm-dd" ng-required="true"/>
            	</div>
	    </div>
	    <div class="col-xs-12 col-sm-6">
	         <label class="control-label" for="hours">* Description:</label>
	         <textarea id="hours" name="hours" rows="3" class="form-control" ng-model="newHoursRecord.description" ng-required="true"></textarea>
        </div>
	</div>
	<div class="row">
        <div class="col-xs-12">
            <input type="submit" class="btn" value="Add" ng-click="addHours()"/>
        </div>
    </div>
</div>
<div class="row">
     <div class="col-xs-12">
     	<table ng-table="hoursTableParams" template-pagination="hours/pager" class="table margin-top peopleList" export-hours="hoursToCSV">
         	  <thead>
                <tr>
                  <th class="col-xs-5 col-sm-3 col-md-3 col-lg-2">Person</th>
                  <th class="col-xs-1 col-sm-3 col-md-2">Role</th>
                  <th class="col-xs-4 col-sm-2 col-md-1">Date</th>
                  <th class="col-xs-1 col-sm-1">Hours</th>
                  <th class="hidden-xs col-sm-3 col-md-5 col-lg-6">Description</th>
                  <th class="col-xs-1"></th>
                </tr>
              </thead>
              <tbody ng-repeat="hoursRecord in $data">
	             <tr>
	             	<td>
	             	  <a href="#{{hoursRecord.person.resource}}">
		                  <img ng-show="hoursRecord.person" class="profileImage" ng-src="{{hoursRecord.person.thumbnail}}"/>
		                  <i class="fa fa-ban" ng-show="!hoursRecord.person"></i>
		                  <span style="display: inline-block;">{{hoursRecord.person.name || 'Unknown'}}</span>
	                  </a>
	                </td>
	                <td>
	                	<span class="visible-xs">{{hoursRecord.role.type.abbreviation}}</span>
	                	<span class="hidden-xs">{{hoursRecord.role.type.title}}</span>
	                </td>
	                <td>
	                  {{hoursRecord.date}}
	                </td>
	                <td>
	                  {{hoursRecord.hours}}
	                </td>
	                <td class="hidden-xs">
	                  {{hoursRecord.description}}
	                </td>
	                <td class="actionsCell">
	                	<button class="btn btn-default" ng-click="deleteHours(hoursRecord.resource)">
						<i class="fa fa-trash-o"></i>
					</button></td>
	             </tr>
	             <tr class="visible-xs">
	             	<td colspan="3">
	                  {{hoursRecord.description}}
	                </td>
	             </tr>
	         </tbody>
         </table>
         <script type="text/ng-template" id="hours/pager">
            <ul class="pager ng-cloak">
              <li ng-repeat="page in pages"
                    ng-class="{'disabled': !page.active, 'previous': page.type == 'prev', 'next': page.type == 'next'}"
                    ng-show="page.type == 'prev' || page.type == 'next'" ng-switch="page.type">
                <a ng-switch-when="prev" ng-click="params.page(page.number)" href="">&laquo; Previous</a>
                <a ng-switch-when="next" ng-click="params.page(page.number)" href="">Next &raquo;</a>
              </li>
                <li>
                <div class="btn-group" ng-show="page.type == 'prev' || page.type == 'next'">
                    <button type="button" ng-class="{'active':params.count() == 10}" ng-click="params.count(10)" class="btn btn-default">10</button>
                    <button type="button" ng-class="{'active':params.count() == 25}" ng-click="params.count(25)" class="btn btn-default">25</button>
                    <button type="button" ng-class="{'active':params.count() == 50}" ng-click="params.count(50)" class="btn btn-default">50</button>
                    <button type="button" ng-class="{'active':params.count() == 100}" ng-click="params.count(100)" class="btn btn-default">100</button>
                </div>
                </li>
            </ul>
        </script>
     </div>
 </div>