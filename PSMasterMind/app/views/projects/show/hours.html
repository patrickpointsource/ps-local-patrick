<div class="row">
  <div class="col-sm-1 col-md-1 hidden-xs">
  	<h3 class="hidden-xs">View</h3>
 </div>
 
  <div class="col-xs-6 col-sm-4 col-md-2" style="padding-top: 20px;">
  	<span>
     <select name="hoursPeriod" class="form-control" ng-if="organizedHours" 
		ng-model="selectedHoursPeriod" ng-change="handleHoursPeriodChanged()"
		ng-required="true"
		ng-options="f.value as f.name for f in hoursPeriods">
	</select>
	</span>
 </div>
 
  <div class="actions col-xs-6 col-sm-6 col-md-9 pageActions">
    <a ng-if="financeAccess" ng-enabled="csvDownloadEnabled" class="btn btn-default" ng-mousedown="hoursToCSV.generate()" href="{{hoursToCSV.link()}}" download="{{project.name}}-{{currentMonth}}.csv">
      <div class="hidden-xs"><i class="fa fa-table"></i><span> Download to Excel</span></div>
      <div class="visible-xs"><i class="fa fa-table"></i></div>
    </a>
    <button type="button"
      class="btn btn-default" data-toggle="collapse" data-target="#newHoursDialog">
        <div class="hidden-xs"><i class="fa fa-plus-square"></i> <span > Add Hours</span></div>
        <div class="visible-xs"><i class="fa fa-plus-square"></i></div>
    </button>
  </div>
</div>
<div class="row">
	<div class="col-sm-12">
		<hr  />
	</div>
</div>

<!-- {{project}}<br/><br/>-->
<!-- {{hoursToCSV.rawJSON()}}<br/><br/>-->
<!-- {{hoursToCSV.rawCSV()}} -->
<!--  
<div class="row" ng-if="hoursValidation.length > 0">
-->
<div class="row" ng-if="getNewHoursValidationErrors(newHoursForm)">
   <div id="hoursValidationDiv" class="alert alert-danger">
     <a class="close" ng-click="hoursValidation=[]">&times;</a>
         <ul>
             <li ng-repeat="message in hoursValidation">{{message}}</li>
         </ul>
     </div>
 </div>
<div ng-form="newHoursForm" id="newHoursDialog" class="well collapse out">
    <div class="row">
      <div class="col-xs-12 col-sm-6 row">
        <div class="col-xs-6">
              <label class="control-label" for="role">Project: </label>
              <span>{{project.name}}</span>
          </div>
          <div class="col-xs-6">
              <label class="control-label" for="role">Person: </label>
              <span>{{me.name}}</span>
          </div>
      <div class="col-xs-6">
             <label class="control-label" for="hours">* Hours:</label>
             <input id="hours" name="hours" class="form-control" type="number" ng-model="newHoursRecord.hours" ng-required="true"/>
          </div>
        <div class="col-xs-6">
              <label class="control-label" for="date">* Date:</label>
              <input id="date" name="date" class="form-control datepicker" type="text"
                    ng-model="newHoursRecord.date"
                    todayBtn="true" data-provide="datepicker" data-date-format="yyyy-mm-dd" ng-required="true"/>
              </div>
      </div>
      <div class="col-xs-12 col-sm-6">
           <label class="control-label" for="hours">* Description:</label>
           <textarea id="hoursDescription" name="hoursDescription" rows="3" class="form-control" ng-model="newHoursRecord.description" 
           	></textarea>
        </div>
  </div>
  <div class="row">
        <div class="col-xs-12">
            <input type="submit" class="btn" value="Add" ng-click="addHours()" ng-disabled="newHoursForm.$invalid"/>
        </div>
    </div>
</div>
<div class="row">
     <div class="col-xs-12" ng-if="!organizedHours">
        <div class="alert alert-warning">There are no logged hours for this project.</div>
     </div>
     <div class="col-xs-12 peopleList">
      <div ng-repeat="person in organizedHours" ng-if="organizedHours" class="well" style="margin-bottom: 10px;">
            <div class="row" style="padding-bottom: 12px;" ng-click="person.collapsed=!person.collapsed">
            	<div class="col-xs-12">
            		<span style="margin-right: 12px;" ng-if="!person.collapsed" ><i class="fa fa-caret-right" ng-show="person && person.thumbnail"></i></span>
            		<span style="margin-right: 12px;" ng-if="person.collapsed" ><i class="fa fa-caret-down" ng-show="person && person.thumbnail"></i></span>
	            	<a href="#{{person.resource}}">
	                    <img ng-show="person && person.thumbnail" class="profileImage" ng-src="{{person.thumbnail}}"/>
	                    <i class="fa fa-ban" ng-show="!person || !person.thumbnail"></i>
	                    <span style="display: inline-block;">{{person.name || 'Unknown'}}</span>
	                  </a>
	            	<span>: {{getPersonProjectRoles(person)}}</span>
	            	<span>- {{getPersonTotalHours($index)}} hours</span>
           		</div>
            	
            </div>
           <div class="col-xs-12" ng-show="person.collapsed" style="font-weight: bold; border-bottom: 2px solid #dddddd; margin-bottom: 10px; height: auto;">
	           	<div class="col-xs-4 col-md-3 col-lg-3">
	           		Date
	           		<div class="visible-xs">
	           		  Description
	           		</div>
	           	</div>
	           	<div class="col-xs-4 col-md-3 col-lg-3">
	           		Hours
	           	</div>
	           	<div class="col-md-3 col-lg-3 hidden-xs">
                    Description
                </div>
           </div>
           <div ng-repeat="hoursRecord in currentDisplayedHours[$index]" ng-show="person.collapsed">
           		 <div class="cos-xs-12">
           		   <div class="row" style="border-bottom: 1px solid #dddddd; margin: 0px;">
		           	<div class="col-xs-4 col-md-3 col-lg-3">
		           		<span class="hidden-xs">{{hoursRecord.date | date}}</span><span class="visible-xs">{{hoursRecord.date | date:'shortDate'}}</span>
		           	</div>
		           	<div class="col-xs-4 col-md-3 col-lg-3">
		           		{{hoursRecord.hours}}
		           	</div>
		           	<div class="col-xs-4 visible-xs">
                        <button class="btn btn-default pull-right" ng-click="deleteHours(hoursRecord.resource)">
                          <i class="fa fa-trash-o"></i>
                        </button>
                    </div>
		           	<div class="col-xs-9 col-md-3 col-lg-3">
		           		{{hoursRecord.description}}
		           	</div>
		           	<div class="col-md-3 col-lg-3 hidden-xs">
		           		<button class="btn btn-default pull-right" ng-click="deleteHours(hoursRecord.resource)">
	                      <i class="fa fa-trash-o"></i>
	                    </button>
		           	</div>
		           </div>
	           </div>
            </div>
        	<div ng-if="currentDisplayedHours[$index].length == 0 && person.collapsed">
        		<span>There are no logged hours</span>
        	</div>
        </div>
    
     </div>
 </div>