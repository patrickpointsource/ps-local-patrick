<div class="profile-actions pageActions" style="margin-top:0;">
    <button ng-hide="editMode" class="btn btn-default" ng-click="edit()">
        <span class="hidden-xs"><i class="fa fa-pencil-square-o"></i> Edit</span>
        <span class="visible-xs"><i class="fa fa-pencil-square-o"></i></span>
    </button>
    <button ng-show="editMode" class="btn btn-default" ng-click="cancel()">
        <span class="hidden-xs"><i class="fa fa-chevron-left"></i> Cancel</span>
        <span class="visible-xs"><i class="fa fa-chevron-left"></i></span>
    </button>
    <button ng-show="editMode" class="btn btn-default" ng-click="save()">
        <span class="hidden-xs"><i class="fa fa-floppy-o"></i> Save</span>
        <span class="visible-xs"><i class="fa fa-floppy-o"></i></span>
    </button>
</div>

<div ng-show="errors.length > 0" class="alert alert-danger" style="margin-left: 20px; margin-right: 20px;">
    <div ng-repeat="error in errors">{{error}}</div>
</div>

<div class="col-xs-12">
    <div class="row padded-row">
        <div class="well">
            <div class="row person-detail">
                <div class="spinner-container" ng-hide="hideProfileSpinner" style="width: calc(100% - 30px);">
                    <i class="fa fa-spinner fa-spin fa-3x"></i>
                </div>
                <div class="personPicColumn">
                    <img class="media-object fullProfileImage" ng-src="{{profile.thumbnail}}" err-src="\images\defaultprofile.png" />
                    <div class="verticalGreyLine" ng-show="gplusProfile.url"></div>
                    <a ng-show="gplusProfile.url" class="googlePlusIcon" ng-href="{{gplusProfile.url}}"><span class="fa fa-google-plus"></span></a>
                </div>
                <div class="person-contact-info">
                    <div class="personDetailName">{{getPersonName(profile, true)}}</div>
                    <div ng-if="canEditPersonnelData() && editMode">
                        <br />
                        <label>Primary Role:</label>
                        <select class="form-control" ng-model="profile.primaryRole.resource" ng-options="m.resource as m.title for m in allRoles"></select>
                    </div>
                    <div ng-hide="editMode">
                        <div ng-if="profile.primaryRole" class="sub-heading">{{getRoleName(profile.primaryRole.resource)}}</div>
                    </div>
                    <div class="col-xs-12 col-sm-6 no-padding">
                        <div ng-show="editMode" class="col-xs-12 col-md-10 col-lg-6">
                            <label for="profilePhone" class="personDetailLabel">Phone</label>
                            <input id="profilePhone" ng-model="profile.phone" class="form-control" type="phone" />
                        </div>
                        <div ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-3 no-horizontal-padding">
                            <label class="personDetailLabel">Phone</label>
                            <a ng-if="profile.phone" ng-href="tel:{{profile.phone | tel}}">{{profile.phone | tel}}</a>
                        </div>
                    </div>
                </div>

                <!--<div class="spinner-container" ng-hide="hideProfileSpinner" style="width: calc(100% - 30px);">
                        <i class="fa fa-spinner fa-spin fa-3x"></i>
                    </div>

                    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-9">
                        <div class="personPicColumn">
                            <img class="media-object fullProfileImage" ng-src="{{profile.thumbnail}}" err-src="\images\defaultprofile.png" />
                            <div class="verticalGreyLine" ng-show="gplusProfile.url"></div>
                            <a ng-show="gplusProfile.url" class="googlePlusIcon" ng-href="{{gplusProfile.url}}"><span class="fa fa-google-plus"></span></a>
                        </div>

                        <div class="person-contact-info">
                            <div class="personDetailName">{{getPersonName(profile, true)}}</div>
                            <div ng-if="canEditPersonnelData() && editMode">
                                <br />
                                <label>Primary Role:</label>
                                <select class="form-control" ng-model="profile.primaryRole.resource" ng-options="m.resource as m.title for m in allRoles"></select>
                            </div>
                            <div ng-hide="editMode">
                                <div ng-if="profile.primaryRole" class="sub-heading">{{getRoleName(profile.primaryRole.resource)}}</div>
                            </div>

                            <div class="col-lg-12 contact-fields">
                                <div class="row">
                                    <div ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-4 no-horizontal-padding padding-left-lg">
                                        <label>Email</label>
                                        <a ng-href="mailto:{{profile.mBox}}">{{profile.mBox}}</a>
                                    </div>

                                    

                                    <div ng-show="editMode" class="col-xs-12 col-md-10 col-lg-6">
                                        <label for="profileSkype" class="personDetailLabel">Skype</label>
                                        <input id="profileSkype" ng-model="profile.skypeId" class="form-control" type="text" />
                                    </div>
                                    <div ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-2 no-horizontal-padding">
                                        <label class="personDetailLabel">Skype Id</label>
                                        <a ng-if="profile.skypeId" ng-href="skype:{{profile.skypeId}}?chat">{{profile.skypeId}}</a>
                                    </div>

                                    <div ng-show="editMode" class="col-xs-12 col-md-10 col-lg-6">
                                        <label for="profileJazzHub" class="personDetailLabel">JazzHub Id</label>
                                        <input id="profileJazzHub" ng-model="profile.jazzHubId" class="form-control" type="text" />
                                    </div>
                                    <div ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-3 no-horizontal-padding-xs">
                                        <label class="personDetailLabel">JazzHub</label>
                                        <span ng-if="profile.jazzHubId">{{profile.jazzHubId}}</span>
                                    </div>

                                    <div ng-if="canEditPersonnelData()" ng-show="editMode" class="col-xs-12 col-md-10 col-lg-3 part-time-container edit padding-top-10">
                                        <input type="checkbox" ng-if="canEditPersonnelData()" name="profilePartTime" ng-model="profile.partTime" />
                                        <label for="profilePartTime" class="profilePartTimeLabel">Part time</label>
                                        <input ng-model="profile.partTimeHours" ng-if="canEditPersonnelData()" ng-disabled="!profile.partTime" placeholder="h/w" type="number" class="form-control" />
                                    </div>
                                    <div ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-3 part-time-container view no-left-padding-sm padding-top-10">
                                        <label class="profilePartTimeLabel">Part time</label>
                                        <span ng-show="profile.partTime">{{profile.partTimeHours}}h/w</span>
                                        <span ng-show="!profile.partTime">NO</span>
                                    </div>

                                    <div ng-if="canEditPersonnelData() && editMode" class="col-xs-12 col-md-10 col-lg-3 edit padding-top-10">
                                        <label for="profilePartTime" class="profilePartTimeLabel">Vacation entitlements</label>
                                        <input ng-model="profile.vacationCapacity" placeholder="days" type="number" class="form-control" />
                                    </div>
                                    <div ng-if="canSeeCapacity" ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-3 view no-left-padding-sm padding-top-10">
                                        <label class="profilePartTimeLabel">Vacation entitlements</label>
                                        <span>{{profile.vacationCapacity || 'Not Set'}} <span ng-show="profile.vacationCapacity">days</span></span>
                                    </div>

                                    <div ng-if="canEditPersonnelData() && editMode" class="col-xs-12 col-md-10 col-lg-6 edit padding-top-10">
                                        <label for="profileManager" class="profilePartTimeLabel">Manager</label>
                                        <select class="form-control"
                                                ng-model="profile.manager" required
                                                ng-options="c as getPersonName(c) for c in managers| orderBy:'name.familyName'">
                                            <option selected disabled hidden value=''></option>"
                                        
                                        </select>
                                    </div>
                                    <div ng-if="canSeeCapacity" ng-hide="editMode" class="col-xs-12 col-md-10 col-lg-3 view no-left-padding-sm padding-top-10">
                                        <label class="profilePartTimeLabel">Manager</label>
                                        <span>{{getPersonName(profile.manager, true) || "Not Selected"}}</span>
                                    </div>

                                    <div ng-hide="!canSeeCapacity" class="col-xs-12 col-md-10 col-lg-3 padding-top-10">
                                        <label class="profilePartTimeLabel">Is Active:</label>
                                        <input type="checkbox" ng-if="canEditPersonnelData()" name="profileIsActive" ng-model="profile.isActive" ng-checked="profile.isActive == 'true'" ng-disabled="!editMode" />
                                    </div>

                                    <div ng-show="isManager && editMode" class="col-xs-12 col-md-12 col-lg-6 edit padding-top-30 pull-right">
                                        <label>Select permissions groups:</label>
                                        <select class="selectpicker select-user-groups form-control" multiple data-selected-text-format="count>3" ng-model="userSecurityGroups" ng-options="g.name for g in securityGroups">
                                        </select>
                                    </div>

                                    <div ng-show="isManager && editMode" class="col-xs-12 col-md-12 col-lg-6 view no-left-padding-sm padding-top-10">
                                        <div class="row col-xs-12 no-margin-bottom">
                                            <label for="profileManager" class="profilePartTimeLabel">{{getPersonName(profile, false, true)}} currently belongs to the following permissions groups:</label>
                                            <span ng-show="userSecurityGroups.length == 0" style="margin-bottom: 10px;">No permissions groups assigned.</span>
                                        </div>

                                        <div ng-repeat="userRole in userSecurityGroups" class="user-security-role col-lg-2 col-md-6 col-xs-12">
                                            <div class="col-xs-12 no-padding" ng-show="!editMode">{{userRole.name}}</div>
                                            <div class="col-xs-11 col-sm-11 col-md-10 no-padding" ng-show="editMode">{{userRole.name}}</div>
                                            <a ng-show="editMode" ng-click="removeUserRole($index)" class="col-xs-1 col-sm-1 col-md-2 no-padding cursor-pointer" style="color:white;"><i class="fa fa-times"></i></a>
                                        </div>
                                    </div>

                                    <div ng-show="isManager && !editMode" class="col-xs-12 view no-left-padding-sm padding-top-10">
                                        <div class="row col-xs-12 no-margin-bottom">
                                            <label for="profileManager" class="profilePartTimeLabel">{{getPersonName(profile, false, true)}} currently belongs to the following permissions groups:</label>
                                            <span ng-show="userSecurityGroups.length == 0" style="margin-bottom: 10px;">No permissions groups assigned.</span>
                                        </div>

                                        <div ng-repeat="userRole in userSecurityGroups" class="user-security-role col-lg-2 col-md-6 col-xs-12">
                                            <div class="col-xs-12 no-padding" ng-show="!editMode">{{userRole.name}}</div>
                                            <div class="col-xs-11 col-sm-11 col-md-10 no-padding" ng-show="editMode">{{userRole.name}}</div>
                                            <a ng-show="editMode" ng-click="removeUserRole($index)" class="col-xs-1 col-sm-1 col-md-2 no-padding cursor-pointer" style="color:white;"><i class="fa fa-times"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-5 col-md-5 col-lg-3 profile-graph-container">
                    <h3 class="profile-graph-header">Hours this week</h3>
                    <div class="percentage-container">
                        <div id="percentage-activeBorder" class="percentage-active-border">
                            <div id="percentage-circle" class="percentage-circle">
                                <h1 class="percentage-circle-week-hours">
                                    {{totalWeekHours ? totalWeekHours : 0}}
                                </h1>
                                <h5 class="percentage-circle-week-hours-rate">of {{hoursRateValue}}</h5>
                            </div>
                        </div>
                    </div>

                    <h5 style="text-align: center;">
                        <span style="font-weight: bold; font-size: 22px;">{{totalMonthHours ? totalMonthHours : 0}}</span> hrs logged this month
                    </h5>
                    <h5 style="text-align: center;">
                        <span style="font-weight: bold; font-size: 22px;">{{hoursRateFromProjects ? hoursRateFromProjects : 0}}</span> % utilized
                    </h5>
                    <h5 style="text-align: center;">
                        <span style="font-weight: bold; font-size: 22px;">{{activeProjectsCount ? activeProjectsCount : 0}}</span> active projects
                    </h5>
                    <!-- <label class="personDetailLabel">Accounts:</label>
                        <span ng-show="!gplusProfile.url">None</span>
                        <ul class="personDetailList">
                            <li ng-show="gplusProfile.url"><a ng-href="{{gplusProfile.url}}">Google+</a>
                            </li>
                        </ul> -->
                <!--</div>-->
            </div>
        </div>
    </div>
</div>
